const translations = {
  pl: {
    Ogrzewanie: "Опалення",

    "Technika sanitarna": "Сантехніка",

    Łazienki: "Санвузол",

    Osprzęt: "Обладнання",

    "o Firmie": "Про компанію",

    CENNIKI: "ЦІННИКИ",

    "CENNIKI PRODUCENTÓW": "ЦІННИКИ ВИРОБНИКІВ",

    "Cenniki do pobrania": "Цінники для завантаження",

    "sprzedaż hurtowa i detaliczna technika grzewcza, sanitarna, wentylacja, klimatyzacja":
      "оптова та роздрібна торгівля: опалювальна техніка, сантехніка, вентиляція, кондиціювання",

    "Jesteśmy prężnie działającą firmą, która zajmuje się sprzedażą hurtową i detaliczną w dziedzinie techniki grzewczej i instalacji sanitarnych. Świadczymy również usługi instalacyjno-montażowe w wyżej wymienionym zakresie.":
      "Ми є динамічною компанією, яка займається оптовим та роздрібним продажем у сфері опалювальної техніки та сантехнічних установок. Також надаємо послуги з монтажу та встановлення в зазначеній галузі.",

    "Cechuje nas dbałość o jakość obsługi klienta oraz oferowanych mu produktów i usług. Współpracujemy z producentami, których wyroby są niezawodne,bezpieczne, energooszczędne i przyjazne dla środowiska.":
      "Нас відрізняє увага до якості обслуговування клієнтів, а також до пропонованих їм продуктів та послуг. Ми співпрацюємо з виробниками, продукція яких є надійною, безпечною, енергоефективною та екологічною.",

    "Skontaktuj się z nami": "Зв'яжіться з нами",

    "Rozwój technologii informacyjnych i komunikacyjnych u naszych partnerów, firmy INSTAL-KA SP. Z O.O. SP. K.":
      "Розвиток інформаційних і комунікаційних технологій у наших партнерів, компанії INSTAL-KA SP. Z O.O. SP. K.",

    "Unia Europejska": "Європейський Союз",
    "Fundusze Europejskie Program Regionalny":
      "Європейські фонди Регіональна програма",
    OPOLSKIE: "ОПОЛЬСЬКЕ",
    "Rzeczpospolita Polska": "Республіка Польща",
    "Opolske dla Rodziny": "Опольське для сім’ї",

    "uczestniczymy w programie lojalnościowym naszego partnera firmy INSTAL-KA Sp. z o.o. GRUPA SBS Sp.k.":
      "ми беремо участь у програмі лояльності нашого партнера компанії INSTAL-KA Sp. z o.o. GRUPA SBS Sp.k.",

    "Nowoczesne rozwiązania w zakresie instalacji grzewczych":
      "Сучасні рішення у сфері опалювальних установок",

    "Oferujemy nowoczesne rozwiązania w zakresie instalacji grzewczych zarówno tych tradycyjnych, jak i współcześnie najbardziej efektywnych i ekologicznych, wykorzystujących odnawialne źródła energii. Jesteśmy gotowi, by wesprzeć Państwa w podjęciu decyzji, co do wyboru systemu oraz technologii wykonania instalacji grzewczej w oparciu o wyroby renomowanych i uznanych na rynku producentów.":
      "Ми пропонуємо сучасні рішення у сфері опалювальних установок, як традиційних, так і найефективніших та екологічних, що використовують відновлювані джерела енергії. Ми готові допомогти вам у виборі системи та технології виконання опалювальної установки, спираючись на продукцію відомих та визнаних на ринку виробників.",

    "Producenci, z którymi współpracujemy, to uznane, nagradzane firmy, gwarantujące wysoką jakość swoich wyrobów, potwierdzoną licznymi certyfikatami.":
      "Виробники, з якими ми співпрацюємо, — це визнані, нагороджені компанії, що гарантують високу якість своєї продукції, підтверджену численними сертифікатами.",

    "Legendarna marka w twoim domu!": "Легендарний бренд у твоєму домі!",
    "Zakup możliwy na korzystnych warunkach, z profesjonalnym wsparciem i sprawną realizacją.":
      "Закупівля можлива на вигідних умовах, з професійною підтримкою та оперативним виконанням.",

    Ogrzewanie: "Опалення",

    "Nowoczesne systemy grzewcze dla każdego rodzaju budynku. Zapewniamy efektywne i oszczędne rozwiązania dostosowane do potrzeb każdego klienta.":
      "Сучасні системи опалення для будь-якого типу будівель. Ми забезпечуємо ефективні та економічні рішення, адаптовані до потреб кожного клієнта.",

    "Kotły gazowe": "Газові котли",
    "SYSTEMY NARZĘDZIOWE": "Інструментальні системи",
    "SYSTEMY SOLARNE": "Сонячні системи",
    "KOTŁY STAŁOPALNE": "Твердопаливні котли",

    "Kotły inne": "Інші котли",
    Grzejniki: "Радіатори",
    "Pompy ciepła": "Теплові насоси",
    Pompy: "Насоси",
    Izolacje: "Ізоляція",
    Rekuperacja: "Рекуперація",
    Kominy: "Димоходи",
    "Systemy<br> narzędziowe": "Системи<br> інструментів",
    "Systemy<br> solarne": "Сонячні<br> системи",

    "Technika sanitarna": "Сантехнічна техніка",

    "Profesjonalne rozwiązania sanitarne dla pełnego komfortu. Gwarantujemy niezawodność i trwałość naszych instalacji.":
      "Професійні сантехнічні рішення для повного комфорту. Ми гарантуємо надійність і довговічність наших установок.",

    Instalacje: "Інсталяції",
    Armatura: "Арматура",
    "Instalacje miedzowe": "Мідні інсталяції",
    "Instalacje gwintowane": "Різьбові інсталяції",
    Oczyszczalnie: "Очистні споруди",
    "INSTALACJE STALOWE": "Сталеві інсталяції",
    "SYSTEMY MOCUJĄCE": "Кріпильні системи",
    "SYSTEMY ZGRZEWANE": "Зварні системи",
    "SYSTEMY ZAPRASOWYWANE": "Прес-системи",
    "Systemy PEX": "Системи PEX",

    Łazienki: "Ванні кімнати",

    "Luksusowe i nowoczesne rozwiązania sanitarne dla właścicieli domów i firm. Profesjonalizm, którym możesz zaufać.":
      "Розкішні та сучасні сантехнічні рішення для власників будинків і компаній. Професіоналізм, якому можна довіряти.",

    "Systemy podtynkowe": "Приховані системи",
    "Meble łazienkowe": "Ванні меблі",
    Baterie: "Змішувачі",
    Ceramika: "Кераміка",

    "Odpływ liniowe": "Лінійні зливи",
    "Osprzęt łazienkowy": "Сантехнічне обладнання",
    "Wanny i kabiny": "Ванни та душові кабіни",
    Zlewozmywaki: "Мийки",

    Osprzęt: "Обладнання",

    "Niezawodność, na której możesz polegać. Wysoka jakość wykonania, która przekłada się na trwałość i efektywność.":
      "Надійність, на яку можна покластися. Висока якість виконання, що забезпечує довговічність і ефективність.",

    Zawory: "Клапани",
    Armatura: "Арматура",
    "Pompy i hydrofory": "Насоси і гідрофори",
    Sterowanie: "Керування",
    "SKRZYNKA GAZOWA": "газова шафа",

    Firma: "Компанія",

    "Specjaliści w technice": "Фахівці в техніці",
    "Zaufanie i jakość": "Довіра та якість",
    "Niezawodni producenci": "Надійні виробники",

    "Jesteśmy firmą specjalizującą się w sprzedaży techniki grzewczej i instalacji sanitarnych oraz świadczeniu usług montażowych.":
      "Ми компанія, що спеціалізується на продажу опалювальної техніки та сантехнічних установок, а також наданні монтажних послуг.",

    "Cechuje nas dbałość o jakość obsługi klienta oraz oferowanych mu produktów i usług.":
      "Нам притаманна турбота про якість обслуговування клієнтів та пропонованої їм продукції й послуг.",

    "Współpracujemy z producentami, których wyroby są niezawodne, bezpieczne, energooszczędne i przyjazne dla środowiska.":
      "Ми співпрацюємо з виробниками, чия продукція є надійною, безпечною, енергоефективною та екологічною.",

    "dane naszych punktów partnerskich": "Дані наших партнерських пунктів",

    "BEZPŁATNY PARKING DLA NASZYCH KLIENTÓW":
      "БЕЗКОШТОВНИЙ ПАРКІНГ ДЛЯ НАШИХ КЛІЄНТІВ",
  },
};

const dictPlToUa = translations.pl || {};

const normalizedDictPlToUa = {};

function normalizeKey(str) {
  return str.toLowerCase().replace(/\s+/g, " ").trim();
}

Object.entries(dictPlToUa).forEach(([pl, ua]) => {
  normalizedDictPlToUa[normalizeKey(pl)] = ua;
});

function waitForElement(selector, cb) {
  const found = document.querySelector(selector);
  if (found) return cb(found);

  const obs = new MutationObserver(() => {
    const el = document.querySelector(selector);
    if (el) {
      obs.disconnect();
      cb(el);
    }
  });

  obs.observe(document.documentElement, { childList: true, subtree: true });
}

let currentLanguage = localStorage.getItem("lang") || "pl";

function applyLanguage(lang) {
  document.querySelectorAll("h1, h2, h3, p, a, button, span").forEach((el) => {
    if (
      el.id === "translateButton" ||
      el.id === "translateButtonMobile" ||
      el.closest("#translateButton") ||
      el.closest("#translateButtonMobile")
    ) {
      return;
    }

    if (
      (el.tagName === "A" || el.tagName === "BUTTON") &&
      el.children.length > 0
    ) {
      if (!el.classList.contains("hero-button") && el.id !== "scrollToFooter") {
        return;
      }
    }

    const original = el.dataset.originalText || el.innerText;
    if (!el.dataset.originalText) {
      el.dataset.originalText = original;
    }

    const core = normalizeKey(original);
    if (!core) return;

    if (lang === "ua") {
      const tr = normalizedDictPlToUa[core];
      if (tr) {
        el.innerText = tr;
      }
    } else {
      el.innerText = el.dataset.originalText;
    }
  });

  currentLanguage = lang;
  localStorage.setItem("lang", lang);
  updateFlagIcons();
}

function toggleLanguage() {
  const next = currentLanguage === "pl" ? "ua" : "pl";
  applyLanguage(next);
}

function updateFlagIcons() {
  const showUa = currentLanguage === "pl";

  document.querySelectorAll(".item-lang-ua").forEach((li) => {
    li.style.display = showUa ? "flex" : "none";
  });

  document.querySelectorAll(".item-lang-pl").forEach((li) => {
    li.style.display = showUa ? "none" : "flex";
  });
}

document.addEventListener("DOMContentLoaded", () => {
  if (currentLanguage === "ua") {
    applyLanguage("ua");
  } else {
    updateFlagIcons();
  }

  waitForElement("#translateButton", (btn) => {
    btn.addEventListener("click", toggleLanguage);
  });

  waitForElement("#translateButtonMobile", (btn) => {
    btn.addEventListener("click", toggleLanguage);
  });
});
